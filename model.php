<?php//// Список всех статей//function articles_all(){	// Запрос.	$query = "SELECT * FROM articles ORDER BY id_article DESC";	$result = mysql_query($query);								if (!$result)		die(mysql_error());		// Извлечение из БД.	$n = mysql_num_rows($result);	$articles = array();	for ($i = 0; $i < $n; $i++)	{		$row = mysql_fetch_assoc($result);				$articles[] = $row;	}		return $articles;}//// Конкретная статья//function articles_get($id_article){    $query = "SELECT * FROM articles WHERE id_article=".$id_article;    $result = mysql_query($query);    if (!$result)        die(mysql_error());    if (mysql_num_rows($result) == 1)        $article = mysql_fetch_assoc($result);    else return false;    return $article;}//// Добавить статью//function articles_new($title, $content){	// Подготовка.	$title = trim($title);	$content = trim($content);	// Проверка.	if ($title == '')		return false;		// Запрос.	$t = "INSERT INTO articles (title, content) VALUES ('%s', '%s')";		$query = sprintf($t, 	                 mysql_real_escape_string($title),	                 mysql_real_escape_string($content));		$result = mysql_query($query);								if (!$result)		die(mysql_error());			return true;}//// Изменить статью//function articles_edit($id_article, $title, $content){    $tmp = "UPDATE articles SET title = '%s', content = '%s' WHERE id_article = %d";    $query = sprintf($tmp,mysql_real_escape_string($title),mysql_real_escape_string($content),mysql_real_escape_string($id_article));    $result = mysql_query($query);    if (!$result)        die(mysql_error());    return true;}//// Удалить статью//function articles_delete($id_article){	$query = "DELETE FROM articles WHERE id_article = ".$id_article;	$result = mysql_query($query);	if(!$result)		die(mysql_errno());	return true;}//// Короткое описание статьи//function articles_intro(){	$MAX_LENGHT = 97;	// Запрос.	$query = "SELECT * FROM articles ORDER BY id_article DESC";	$result = mysql_query($query);	if (!$result)	die(mysql_error());	// Извлечение из БД.	$n = mysql_num_rows($result);	$articles = array();	for ($i = 0; $i < $n; $i++)	{		$row = mysql_fetch_assoc($result);		if (strlen($row['content']) > $MAX_LENGHT) {			$row['content'] = strip_tags($row['content']);			$row['content'] = substr($row['content'], 0, $MAX_LENGHT);			$row['content'] = rtrim($row['content'], "!,.-");			$row['content'] = substr($row['content'], 0, strrpos($row['content'], ' '));			$row['content'] .= "...";		}		$articles[] = $row;	}	return $articles;	// $article - это ассоциативный массив, представляющий статью}